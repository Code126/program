{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3>Inventario</h3>
  <div class="btn-group">
    <a class="btn btn-outline-primary" href="{{ url_for('inventory_import') }}">Importar Excel</a>
    <a class="btn btn-primary" href="{{ url_for('export_inventory') }}">Exportar Excel</a>
  </div>
</div>
<table class="table table-hover align-middle">
  <thead>
    <tr>
      <th>ID</th><th>Producto</th><th>Tipo</th><th>Talla</th><th>Color</th><th>Precio</th><th>Stock</th><th>Ajustar</th>
    </tr>
  </thead>
  <tbody>
    {% for v in variants %}
    <tr>
      <td>{{ v.id }}</td>
      <td>{{ v.product.name }}</td>
      <td><span class="badge text-bg-secondary">{{ v.product.product_type.name }}</span></td>
      <td>{{ v.size }}</td>
      <td>{{ v.color }}</td>
      <td>${{ '%.2f'|format(v.price) }}</td>
      <td><span class="badge {% if v.stock > 0 %}text-bg-success{% else %}text-bg-danger{% endif %}">{{ v.stock }}</span></td>
      <td>
        <form method="post" action="{{ url_for('inventory_adjust', variant_id=v.id) }}" class="d-flex gap-2">
          <input type="number" name="delta" class="form-control form-control-sm" style="max-width:120px" placeholder="+/- Cantidad" required>
          <input type="text" name="reason" class="form-control form-control-sm" placeholder="RazÃ³n" value="Adjustment">
          <button class="btn btn-sm btn-outline-primary">Aplicar</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
